<!doctype html>
<html lang="en">

<head>
    <title>Doctor Availability</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

<script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>

<body>
    <div id="app" class="container">
        <h1>Doctor Availability</h1>
        <div class="row" v-show="!edit">
            <div id="main" class="col-8">
                Enter your Availability S/N: <input v-model="aid" placeholder="Doctor Availability SN">
                <button @click="findDoctor()" type="button" class="my-1 btn btn-sm btn-primary">Search</button>
                <button @click="pageRefresh()" type="button" class="my-1 btn btn-sm btn-primary">Clear</button><br>

                <span class="text-danger" v-if="searchError!=''">
                    {{ searchError}}
                    <br>
                </span>

                <table class="table table-striped" v-if="hasDoctors">
                    <thead>
                        <tr>
                            <th>Availability S/N</th>
                            <th>Doctor ID</th>
                            <th>Name</th>
                            <th>Date</th>
                            <th>Availability</th>
                            <th>Edit</th>
                            <th>Delete?</th>
                        </tr>
                        <tr v-for="doctor in doctors">
                            <td>{{ doctor.aid }}</td>
                            <td>{{ doctor.did }}</td>
                            <td>{{ doctor.name }}</td>
                            <td>{{ doctor.date }}</td>
                            <td>{{ doctor.availability }}</td>
                            <td><button @click="editDoctorForm(doctor)" type="button"
                                    class="btn btn-primary">Edit</button>
                            </td>
                            <td><button @click="del(doctor.aid)" type="button" class="btn btn-primary">Del</button></td>
                        </tr>
                    </thead>
                </table>
                <div class="text-danger" v-if="!hasDoctors">{{ message }}</div>
            </div> <!-- main & col -->
            <div class="col-4"> <!-- Add Availability-->
                <h2>Indicate Doctor Availability</h2>
                <div class="form-group">
                    <label for="did">Availability S/N</label>
                    <input v-model="newAid" type="number" class="form-control" id="aid"
                        placeholder="Enter Availability S/N">
                </div>
                <div class="form-group">
                    <label for="did">Doctor ID</label>
                    <input v-model="newDid" type="number" class="form-control" id="did" placeholder="Enter Doctor ID">
                </div>
                <div class="form-group">
                    <label for="name">Name</label>
                    <input v-model="newName" type="text" class="form-control" id="name" placeholder="Enter Name">
                </div>
                <div class="form-group">
                    <label for="date">Date</label>
                    <input v-model="newDate" type="date" class="form-control" id="date"
                        placeholder="Enter Date YYYY-MM-DD">
                </div>
                <div class="form-group">
                    <label for="availability">Availability</label>
                    <input v-model="newAvailability" type="text" class="form-control" id="availability"
                        placeholder="e.g 1300,1400,1500">
                </div>
                <button @click="addDoctor" class="btn btn-primary" v-on:submit.prevent="onSubmit">Add
                    Availability</button>
                <div class="text-success" v-if="doctorAdded">
                    The doctor availability has been successfully added! <br>
                    <br>
                </div>
                <div class="text-success" v-if="availDeleted">
                    The doctor availability has been successfully deleted! <br>
                    <br>
                </div>
                <div class="text-danger" v-if="addDoctorError!=''">
                    There is a problem adding this new availability:<br>
                    {{ addDoctorError}}
                    <br>
                </div>
            </div> <!-- col Add Availability--> 
        </div> <!-- row v-show: !edit -->

        <div v-show="edit">
            <h3>Current Availability</h3>
            <table class="table table-striped" v-if="hasDoctors">
                <thead>
                    <tr>
                        <th>Availability S/N</th>
                        <th>Doctor ID</th>
                        <th>Name</th>
                        <th>Date</th>
                        <th>Availability</th>
                    </tr>
                    <tr>
                        <td> {{ editCurrentDoctor.aid }} </td>
                        <td> {{ editCurrentDoctor.did }} </td>
                        <td> {{ editCurrentDoctor.name }} </td>
                        <td> {{ editCurrentDoctor.date }} </td>
                        <td> {{ editCurrentDoctor.availability }} </td>
                    </tr>
                </thead>
            </table>

            <h3>To Edit Availability</h3>
            <table class="table table-striped" v-if="hasDoctors">
                <thead>
                    <tr>
                        <th>Availability S/N</th>
                        <th>Doctor ID</th>
                        <th>Name</th>
                        <th>Date</th>
                        <th>Availability</th>
                    </tr>
                    <tr>
                        <td class="form-group">
                            {{ editCurrentDoctor.aid }}
                        </td>
                        <td class="form-group">
                            <input type="number" class="form-control" v-model="editDid">
                        </td>
                        <td class="form-group">
                            <input type="text" class="form-control" v-model="editName">
                        </td>
                        <td class="form-group">
                            <input type="date" class="form-control" v-model="editDate">
                        </td>
                        <td class="form-group">
                            <input type="text" class="form-control" v-model="editAvailability">
                        </td>
                    </tr>
                </thead>
            </table>

            <div>
                <button @click="editDoctor" class="btn btn-primary" v-on:submit.prevent="onSubmit">Confirm
                    Edit</button>
            </div>
            <div class="text-success" v-if="editSuccessful">
                The edit has been successful! <br>
                <br>
            </div>

            <div class='mt-4'>
                <button @click="pageRefresh" class="btn btn-secondary">Return to home
                    page</button>
            </div>

        </div> <!-- v-show: edit -->
    </div> <!-- app: container -->

    <!-- VueJS code-->
    <script src = "../Reveal/js/doctor.js"></script>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous">
    </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous">
    </script>
</body>

</html>